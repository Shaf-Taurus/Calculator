<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inflation Calculator | Pakistan</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    :root {
      --primary: #00695C;
      --primary-dark: #004D40;
      --primary-light: #4DB6AC;
      --secondary: #0288D1;
      --accent: #FF9800;
      --light: #F5F5F5;
      --dark: #263238;
      --gray: #607D8B;
      --border-radius: 16px;
      --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      --transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    body {
      background: linear-gradient(135deg, #e0f7fa, #f1f8e9);
      color: var(--dark);
      line-height: 1.6;
      min-height: 100vh;
    }

    .container {
      max-width: 1200px;
      width: 100%;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header Styles */
    header {
      text-align: center;
      padding: 40px 20px 20px;
      background: linear-gradient(145deg, #00695C, #0288D1);
      border-radius: 0 0 var(--border-radius) var(--border-radius);
      color: white;
      margin-bottom: 40px;
      box-shadow: var(--shadow);
    }

    .logo-container {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 90px;
      height: 90px;
      background: white;
      border-radius: 50%;
      margin-bottom: 20px;
      box-shadow: var(--shadow);
    }

    .logo-container i {
      font-size: 3rem;
      color: var(--primary);
    }

    h1 {
      font-size: 2.5rem;
      margin-bottom: 10px;
      font-weight: 700;
    }

    .subtitle {
      font-size: 1.2rem;
      max-width: 700px;
      margin: 0 auto;
      opacity: 0.9;
    }

    /* Navigation */
    .nav-buttons {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-top: 30px;
      flex-wrap: wrap;
    }

    .nav-button {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 25px;
      background: white;
      color: var(--primary);
      text-decoration: none;
      border-radius: 50px;
      font-weight: 600;
      transition: var(--transition);
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }

    .nav-button:hover {
      transform: translateY(-3px);
      box-shadow: 0 7px 15px rgba(0, 105, 92, 0.2);
      background: var(--primary);
      color: white;
    }

    /* Calculator Styles */
    .calculator-card {
      background: white;
      border-radius: var(--border-radius);
      overflow: hidden;
      box-shadow: var(--shadow);
      display: flex;
      flex-wrap: wrap;
      margin-bottom: 40px;
    }

    .input-section {
      flex: 1;
      min-width: 320px;
      padding: 40px;
      background: linear-gradient(145deg, #f8f9fa, #ffffff);
      border-right: 1px solid rgba(0, 0, 0, 0.05);
    }

    .results-section {
      flex: 1;
      min-width: 320px;
      padding: 40px;
      display: flex;
      flex-direction: column;
    }

    .section-title {
      display: flex;
      align-items: center;
      gap: 12px;
      font-size: 1.5rem;
      color: var(--primary-dark);
      margin-bottom: 30px;
      padding-bottom: 15px;
      border-bottom: 2px solid var(--primary-light);
    }

    .section-title i {
      color: var(--primary);
    }

    .form-group {
      margin-bottom: 30px;
      position: relative;
    }

    label {
      display: block;
      margin-bottom: 12px;
      font-weight: 600;
      color: var(--dark);
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    label i {
      color: var(--primary);
      width: 24px;
      text-align: center;
    }

    .input-with-icon {
      position: relative;
    }

    .input-with-icon i {
      position: absolute;
      left: 18px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--primary);
      font-size: 1.2rem;
    }

    input, select {
      width: 100%;
      padding: 16px 20px 16px 55px;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      font-size: 1.1rem;
      transition: var(--transition);
      background: white;
      color: var(--dark);
      font-weight: 500;
    }

    input:focus, select:focus {
      border-color: var(--primary);
      outline: none;
      box-shadow: 0 0 0 4px rgba(0, 105, 92, 0.2);
    }

    .range-container {
      display: flex;
      align-items: center;
      gap: 15px;
      margin-top: 15px;
    }

    .range-container input[type="range"] {
      flex: 1;
      padding: 0;
      -webkit-appearance: none;
      height: 10px;
      border-radius: 10px;
      background: linear-gradient(to right, var(--primary-light), var(--primary));
      outline: none;
    }

    .range-container input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 26px;
      height: 26px;
      border-radius: 50%;
      background: white;
      border: 3px solid var(--primary);
      cursor: pointer;
      transition: var(--transition);
      box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
    }

    .range-container input[type="range"]::-webkit-slider-thumb:hover {
      transform: scale(1.15);
      background: var(--primary-light);
    }

    .range-value {
      min-width: 70px;
      text-align: center;
      font-weight: 700;
      color: white;
      background: var(--primary);
      padding: 8px 15px;
      border-radius: 30px;
      font-size: 1rem;
    }

    .buttons {
      display: flex;
      gap: 20px;
      margin-top: 30px;
    }

    button {
      flex: 1;
      padding: 18px;
      border: none;
      border-radius: 12px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    button.primary {
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: white;
    }

    button.primary:hover {
      transform: translateY(-3px);
      box-shadow: 0 7px 14px rgba(0, 105, 92, 0.3);
    }

    button.secondary {
      background: white;
      color: var(--primary);
      border: 2px solid var(--primary);
    }

    button.secondary:hover {
      background: rgba(0, 113, 95, 0.05);
      transform: translateY(-3px);
    }

    .chart-container {
      flex: 1;
      background: white;
      border-radius: var(--border-radius);
      padding: 25px;
      box-shadow: var(--shadow);
      display: flex;
      flex-direction: column;
      margin-bottom: 30px;
    }

    .chart-container h2 {
      margin-bottom: 20px;
      color: var(--primary);
      font-size: 1.5rem;
      text-align: center;
    }

    .chart-wrapper {
      position: relative;
      flex: 1;
      min-height: 300px;
    }

    .disclaimer {
      background: rgba(255, 152, 0, 0.1);
      border-left: 4px solid var(--accent);
      padding: 20px;
      border-radius: 12px;
      margin-top: 20px;
      font-size: 1rem;
    }

    .disclaimer h3 {
      color: var(--accent);
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .results-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      border-radius: var(--border-radius);
      overflow: hidden;
    }

    .results-table th {
      background: var(--primary);
      color: white;
      font-weight: 600;
      padding: 15px;
      text-align: center;
    }

    .results-table td {
      padding: 12px 15px;
      text-align: center;
      border-bottom: 1px solid #eee;
    }

    .results-table tr:nth-child(even) {
      background-color: #f9f9f9;
    }

    .results-table tr:hover {
      background-color: #f0f7fa;
    }
    
    /* Future Value Section */
    .future-value-section {
      background: white;
      border-radius: var(--border-radius);
      padding: 30px;
      box-shadow: var(--shadow);
      margin-bottom: 40px;
      border-top: 5px solid var(--accent);
    }
    
    .future-value-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-top: 20px;
    }
    
    @media (max-width: 768px) {
      .future-value-grid {
        grid-template-columns: 1fr;
      }
    }
    
    .future-value-card {
      background: var(--light);
      padding: 25px;
      border-radius: var(--border-radius);
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .future-value-card h3 {
      color: var(--primary);
      margin-bottom: 15px;
      font-size: 1.4rem;
    }
    
    .future-value-card .amount {
      font-size: 2.2rem;
      font-weight: 800;
      color: var(--primary-dark);
      margin: 15px 0;
    }
    
    .future-value-card .subtext {
      color: var(--gray);
      font-size: 1rem;
    }

    footer {
      background: linear-gradient(to right, var(--primary-dark), var(--primary));
      color: white;
      padding: 40px 20px;
      border-radius: var(--border-radius) var(--border-radius) 0 0;
      text-align: center;
    }

    .footer-content {
      max-width: 800px;
      margin: 0 auto;
    }

    .footer-links {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 30px 0;
      flex-wrap: wrap;
    }

    .footer-links a {
      color: white;
      text-decoration: none;
      font-weight: 500;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .footer-links a:hover {
      color: var(--accent);
      transform: translateY(-3px);
    }

    .copyright {
      margin-top: 30px;
      padding-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.2);
    }

    /* New Styles */
    .value-comparison {
      background: #f8f9fa;
      border-radius: var(--border-radius);
      padding: 25px;
      margin-top: 20px;
      border: 1px solid #e0e0e0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .value-comparison h4 {
      font-size: 1.2rem;
      margin-bottom: 15px;
      color: var(--primary-dark);
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr auto 1fr;
      gap: 15px;
      align-items: center;
      width: 100%;
      max-width: 500px;
    }
    
    .comparison-value {
      text-align: center;
      padding: 15px;
      border-radius: 10px;
      font-weight: 700;
      font-size: 1.2rem;
    }
    
    .today-value {
      background: rgba(0, 105, 92, 0.1);
      color: var(--primary-dark);
    }
    
    .future-value {
      background: rgba(255, 152, 0, 0.1);
      color: #E65100;
    }
    
    .comparison-arrow {
      font-size: 2rem;
      color: var(--primary);
    }
    
    .purchasing-power {
      margin-top: 20px;
      font-size: 1.1rem;
      font-weight: 600;
      color: #E65100;
      text-align: center;
      padding: 10px 15px;
      background: rgba(255, 152, 0, 0.1);
      border-radius: 30px;
    }
    
    .purchasing-power i {
      margin-right: 8px;
    }
    
    .future-value-card .value-change {
      position: absolute;
      top: 10px;
      right: 10px;
      background: rgba(255, 152, 0, 0.1);
      color: #E65100;
      padding: 5px 10px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
    }

    /* Responsive Design */
    @media (max-width: 900px) {
      .calculator-card {
        flex-direction: column;
      }
      
      .input-section {
        border-right: none;
        border-bottom: 1px solid rgba(0, 0, 0, 0.05);
      }
      
      .comparison-grid {
        grid-template-columns: 1fr;
        grid-template-rows: auto auto auto;
      }
      
      .comparison-arrow {
        transform: rotate(90deg);
        padding: 10px 0;
      }
    }

    @media (max-width: 600px) {
      .input-section, .results-section {
        padding: 30px 20px;
      }
      
      h1 {
        font-size: 2rem;
      }
      
      .section-title {
        font-size: 1.3rem;
      }
      
      .buttons {
        flex-direction: column;
      }
      
      .future-value-card .amount {
        font-size: 1.8rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo-container">
      <i class="fas fa-money-bill-wave"></i>
    </div>
    <h1>Pakistan Inflation Calculator</h1>
    <p class="subtitle">Calculate the impact of inflation on your money over time</p>
    
    <div class="nav-buttons">
      <a href="index.html" class="nav-button">
        <i class="fas fa-home"></i> Home
      </a>
      <a href="sip_calculator.html" class="nav-button">
        <i class="fas fa-chart-line"></i> SIP Calculator
      </a>
      <a href="stock_calculator.html" class="nav-button">
        <i class="fas fa-chart-candlestick"></i> Stock Calculator
      </a>
    </div>
  </header>
  
  <div class="container">
    <div class="calculator-card">
      <div class="input-section">
        <h2 class="section-title"><i class="fas fa-sliders-h"></i> Calculation Parameters</h2>
        
        <div class="form-group">
          <label for="amount"><i class="fas fa-coins"></i> Initial Amount (PKR)</label>
          <div class="input-with-icon">
            <i class="fas fa-rupee-sign"></i>
            <input type="number" id="amount" value="2700000" min="1000" step="1000">
          </div>
          <div class="range-container">
            <input type="range" id="amount-range" min="1000" max="10000000" value="2700000" step="1000">
            <span class="range-value" id="amount-value">₨ 2,700,000</span>
          </div>
        </div>
        
        <div class="form-group">
          <label for="startYear"><i class="fas fa-calendar"></i> Start Year</label>
          <div class="input-with-icon">
            <i class="fas fa-history"></i>
            <select id="startYear" class="w-full"></select>
          </div>
        </div>
        
        <div class="buttons">
          <button class="primary" id="calculate-btn">
            <i class="fas fa-calculator"></i> Calculate Inflation
          </button>
          <button class="secondary" id="reset-btn">
            <i class="fas fa-redo"></i> Reset Values
          </button>
        </div>
        
        <!-- Purchasing Power Estimator Section -->
        <div class="form-group" style="margin-top: 40px; padding-top: 30px; border-top: 2px dashed var(--primary-light);">
          <h2 class="section-title" style="border-bottom: none; padding-bottom: 0;">
            <i class="fas fa-crystal-ball"></i> Purchasing Power Estimator
          </h2>
          <p style="margin-bottom: 20px; color: var(--gray);">
            Project how inflation will reduce your purchasing power based on average historical inflation of <span style="font-weight: 700; color: var(--primary);">9.44%</span>
          </p>
          
          <div class="form-group">
            <label for="future-amount"><i class="fas fa-coins"></i> Initial Amount (PKR)</label>
            <div class="input-with-icon">
              <i class="fas fa-rupee-sign"></i>
              <input type="number" id="future-amount" value="100000" min="1000" step="1000">
            </div>
          </div>
          
          <div class="form-group">
            <label for="future-years"><i class="fas fa-calendar"></i> Years in Future</label>
            <div class="input-with-icon">
              <i class="fas fa-clock"></i>
              <select id="future-years">
                <option value="1">1 year</option>
                <option value="2">2 years</option>
                <option value="3">3 years</option>
                <option value="5">5 years</option>
                <option value="10" selected>10 years</option>
                <option value="15">15 years</option>
                <option value="20">20 years</option>
                <option value="25">25 years</option>
                <option value="30">30 years</option>
              </select>
            </div>
          </div>
          
          <button class="primary" id="calculate-future-btn">
            <i class="fas fa-calculator"></i> Calculate Future Purchasing Power
          </button>
          
          <div class="value-comparison">
            <h4><i class="fas fa-balance-scale"></i> Purchasing Power Comparison</h4>
            <div class="comparison-grid">
              <div class="comparison-value today-value">
                <div>Today's Value</div>
                <div id="today-value">₨ 100,000</div>
              </div>
              <div class="comparison-arrow">
                <i class="fas fa-arrow-right"></i>
              </div>
              <div class="comparison-value future-value">
                <div>Future Value</div>
                <div id="future-value">₨ 91,370</div>
              </div>
            </div>
            <div class="purchasing-power">
              <i class="fas fa-exclamation-circle"></i>
              <span id="purchasing-power-text">Your money will have 91.37% of its current purchasing power</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="results-section">
        <h2 class="section-title"><i class="fas fa-chart-bar"></i> Results Visualization</h2>
        
        <div class="chart-container">
          <h2><i class="fas fa-chart-line"></i> Value Over Time</h2>
          <div class="chart-wrapper">
            <canvas id="chart"></canvas>
          </div>
        </div>
        
        <div class="results-card">
          <h2 class="section-title"><i class="fas fa-table"></i> Yearly Breakdown</h2>
          <div class="table-container">
            <table class="results-table">
              <thead>
                <tr>
                  <th>Year</th>
                  <th>Inflation %</th>
                  <th>Depreciated Value</th>
                  <th>Inflation Value</th>
                </tr>
              </thead>
              <tbody id="results"></tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Purchasing Power Projection Section -->
    <div class="future-value-section">
      <h2 class="section-title" style="border-bottom: none;">
        <i class="fas fa-project-diagram"></i> Purchasing Power Projections
      </h2>
      <p style="margin-bottom: 20px; color: var(--gray); text-align: center;">
        See how your money's purchasing power could decrease over time with Pakistan's average inflation rate
      </p>
      
      <div class="future-value-grid">
        <div class="future-value-card">
          <span class="value-change">-36.2%</span>
          <h3>After 5 Years</h3>
          <div class="amount" id="future-5y">₨ 63,800</div>
          <div class="subtext">Based on 9.44% average inflation</div>
        </div>
        
        <div class="future-value-card">
          <span class="value-change">-60.4%</span>
          <h3>After 10 Years</h3>
          <div class="amount" id="future-10y">₨ 39,600</div>
          <div class="subtext">Based on 9.44% average inflation</div>
        </div>
        
        <div class="future-value-card">
          <span class="value-change">-75.8%</span>
          <h3>After 15 Years</h3>
          <div class="amount" id="future-15y">₨ 24,200</div>
          <div class="subtext">Based on 9.44% average inflation</div>
        </div>
        
        <div class="future-value-card">
          <span class="value-change">-85.6%</span>
          <h3>After 20 Years</h3>
          <div class="amount" id="future-20y">₨ 14,400</div>
          <div class="subtext">Based on 9.44% average inflation</div>
        </div>
      </div>
    </div>
    
    <div class="disclaimer">
      <h3><i class="fas fa-exclamation-triangle"></i> Economic Disclaimer</h3>
      <p>This calculator uses historical inflation data for Pakistan. The depreciation model assumes a 10% annual decrease in purchasing power. Actual future inflation rates may vary significantly. This tool is for educational purposes only and should not be considered financial advice.</p>
    </div>
  </div>
  
  <footer>
    <div class="footer-content">
      <div class="footer-links">
        <a href="index.html"><i class="fas fa-home"></i> Home</a>
        <a href="sip_calculator.html"><i class="fas fa-chart-line"></i> SIP Calculator</a>
        <a href="inflation_calculator.html"><i class="fas fa-money-bill-wave"></i> Inflation Calculator</a>
        <a href="stock_calculator.html"><i class="fas fa-chart-candlestick"></i> Stock Calculator</a>
      </div>
      
      <div class="copyright">
        <p>© 2023 Financial Calculators Pakistan. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script>
    // Historical inflation data for Pakistan
    const inflationRates = {
      2000: 4.37, 2001: 3.15, 2002: 3.29, 2003: 2.91,
      2004: 7.44, 2005: 9.06, 2006: 7.92, 2007: 7.60,
      2008: 20.29, 2009: 13.65, 2010: 12.94,
      2011: 11.92, 2012: 9.68, 2013: 7.69,
      2014: 7.19, 2015: 2.53, 2016: 3.77,
      2017: 4.09, 2018: 5.08, 2019: 10.58,
      2020: 9.74, 2021: 9.50, 2022: 19.87,
      2023: 30.77, 2024: 12.63, 2025: 6.1
    };
    
    const AVERAGE_INFLATION_RATE = 9.44;

    // DOM Elements
    const amountInput = document.getElementById("amount");
    const amountRange = document.getElementById("amount-range");
    const amountValue = document.getElementById("amount-value");
    const startYearSelect = document.getElementById("startYear");
    const calculateBtn = document.getElementById("calculate-btn");
    const resetBtn = document.getElementById("reset-btn");
    const resultsBody = document.getElementById("results");
    const futureAmountInput = document.getElementById("future-amount");
    const futureYearsSelect = document.getElementById("future-years");
    const calculateFutureBtn = document.getElementById("calculate-future-btn");
    const futureValueDisplay = document.getElementById("future-value");
    const todayValueDisplay = document.getElementById("today-value");
    const purchasingPowerText = document.getElementById("purchasing-power-text");
    
    // Future projection cards
    const future5y = document.getElementById("future-5y");
    const future10y = document.getElementById("future-10y");
    const future15y = document.getElementById("future-15y");
    const future20y = document.getElementById("future-20y");
    
    let chart = null;

    // Format currency for PKR
    function formatCurrency(amount) {
      return '₨ ' + Math.round(amount).toLocaleString('en-PK');
    }
    
    // Calculate purchasing power after inflation
    function calculatePurchasingPower(amount, years) {
      return amount / Math.pow(1 + AVERAGE_INFLATION_RATE/100, years);
    }
    
    // Update future projections
    function updateFutureProjections(initialAmount) {
      // Calculate purchasing power for each time period
      const value5y = calculatePurchasingPower(initialAmount, 5);
      const value10y = calculatePurchasingPower(initialAmount, 10);
      const value15y = calculatePurchasingPower(initialAmount, 15);
      const value20y = calculatePurchasingPower(initialAmount, 20);
      
      // Update display
      future5y.textContent = formatCurrency(value5y);
      future10y.textContent = formatCurrency(value10y);
      future15y.textContent = formatCurrency(value15y);
      future20y.textContent = formatCurrency(value20y);
      
      // Update the comparison section
      todayValueDisplay.textContent = formatCurrency(initialAmount);
      futureValueDisplay.textContent = formatCurrency(value10y);
      
      // Calculate purchasing power percentage
      const purchasingPower = (value10y / initialAmount * 100).toFixed(2);
      purchasingPowerText.textContent = `Your money will have ${purchasingPower}% of its current purchasing power`;
    }

    // Initialize the calculator
    function initCalculator() {
      // Populate year dropdown
      const years = Object.keys(inflationRates).sort((a, b) => b - a);
      years.forEach(year => {
        const option = document.createElement("option");
        option.value = year;
        option.textContent = year;
        startYearSelect.appendChild(option);
      });
      
      // Set default start year to 2018
      startYearSelect.value = "2018";
      
      // Initialize amount range slider
      amountRange.value = amountInput.value;
      amountValue.textContent = formatCurrency(amountInput.value);
      
      // Initialize future projections
      updateFutureProjections(100000);
      
      // Event listeners
      amountInput.addEventListener('input', function() {
        amountRange.value = this.value;
        amountValue.textContent = formatCurrency(this.value);
      });
      
      amountRange.addEventListener('input', function() {
        amountInput.value = this.value;
        amountValue.textContent = formatCurrency(this.value);
      });
      
      calculateBtn.addEventListener('click', calculate);
      resetBtn.addEventListener('click', resetCalculator);
      
      // Purchasing power calculator
      calculateFutureBtn.addEventListener('click', function() {
        const amount = parseFloat(futureAmountInput.value);
        updateFutureProjections(amount);
      });
      
      // Update projections when future amount changes
      futureAmountInput.addEventListener('input', function() {
        const amount = parseFloat(this.value) || 100000;
        updateFutureProjections(amount);
      });
      
      // Initial calculation
      calculate();
    }

    // Perform the calculation
    function calculate() {
      const amount = parseFloat(amountInput.value);
      const startYear = parseInt(startYearSelect.value);
      
      let depValue = amount;
      let infValue = amount;
      const rows = [];
      const years = [];
      const depData = [];
      const infData = [];
      
      Object.entries(inflationRates).forEach(([yearStr, rate]) => {
        const year = parseInt(yearStr);
        if (year >= startYear) {
          // Apply depreciation (10% per year)
          depValue *= 0.9;
          // Apply inflation
          infValue *= (1 + rate / 100);
          
          // Store for chart
          years.push(year);
          depData.push(depValue);
          infData.push(infValue);
          
          // Create table row
          rows.push(`
            <tr>
              <td>${year}</td>
              <td>${rate.toFixed(2)}%</td>
              <td>${formatCurrency(depValue)}</td>
              <td>${formatCurrency(infValue)}</td>
            </tr>
          `);
        }
      });
      
      // Update table
      resultsBody.innerHTML = rows.join("");
      
      // Draw/update chart
      drawChart(years, depData, infData);
    }

    // Draw the chart
    function drawChart(labels, depData, infData) {
      const ctx = document.getElementById('chart').getContext('2d');
      
      if (chart) {
        chart.destroy();
      }
      
      chart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: labels,
          datasets: [
            {
              label: "Depreciated Value",
              data: depData,
              borderColor: '#00695C',
              backgroundColor: 'rgba(0, 105, 92, 0.1)',
              borderWidth: 3,
              pointRadius: 4,
              pointBackgroundColor: '#00695C',
              tension: 0.3,
              fill: true
            },
            {
              label: "Inflation Value",
              data: infData,
              borderColor: '#0288D1',
              backgroundColor: 'rgba(2, 136, 209, 0.1)',
              borderWidth: 3,
              pointRadius: 4,
              pointBackgroundColor: '#0288D1',
              tension: 0.3,
              fill: true
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'top',
              labels: {
                padding: 20,
                font: {
                  size: 14,
                  family: "'Segoe UI', Tahoma, Geneva, Verdana, sans-serif"
                },
                usePointStyle: true,
                pointStyle: 'circle'
              }
            },
            tooltip: {
              backgroundColor: 'rgba(0, 0, 0, 0.8)',
              titleFont: {
                size: 16
              },
              bodyFont: {
                size: 14
              },
              padding: 12,
              displayColors: false,
              callbacks: {
                label: function(context) {
                  return context.dataset.label + ': ' + formatCurrency(context.parsed.y);
                }
              }
            }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: {
                color: 'rgba(0, 0, 0, 0.05)'
              },
              ticks: {
                callback: function(value) {
                  if (value >= 1000000) {
                    return '₨ ' + (value / 1000000).toFixed(1) + 'M';
                  } else if (value >= 1000) {
                    return '₨ ' + (value / 1000).toFixed(0) + 'K';
                  }
                  return '₨ ' + value;
                }
              }
            },
            x: {
              grid: {
                color: 'rgba(0, 0, 0, 0.05)'
              }
            }
          },
          animation: {
            duration: 1000,
            easing: 'easeOutQuart'
          }
        }
      });
    }

    // Reset calculator to default values
    function resetCalculator() {
      amountInput.value = 2700000;
      amountRange.value = 2700000;
      amountValue.textContent = formatCurrency(2700000);
      startYearSelect.value = "2018";
      calculate();
    }

    // Initialize when page loads
    window.onload = initCalculator;
  </script>
</body>
</html>